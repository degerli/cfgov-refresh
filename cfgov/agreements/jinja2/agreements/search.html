{% extends "agreements/base_agreements.html" %}

{% block title %}Credit card agreement database search result{% endblock %}

{% block content %}

<main class="content content__2-1 content__bleedbar">
    <div class="content_wrapper">
        <nav class="breadcrumbs" aria-label="Breadcrumbs">
            <a href="/" class="breadcrumbs_link">Home</a>
            <a href="/credit-cards/" class="breadcrumbs_link">Credit cards</a>
            <a href="/credit-cards/agreements" class="breadcrumbs_link">Credit card agreement database</a>
        </nav>
    </div>
    <div class="content_wrapper">
        <div class="content_main">

            <h2>Credit card agreement database</h2>
            <div id="ccagrsearch">
                <table class="o-table o-table__striped u-w100pct">
                    {% if issuer %}
                    <caption>Agreements by '{{ issuer.name }}'</caption>
                    {% endif %}
                    <thead>
                        <tr>
                            <th>Issuer</th>
                            <th>Agreement description</th>
                            <th>Download</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% if issuer and page.object_list %}
                        {% for result in page.object_list %}

                        <tr>
                            <td>{{ result.issuer.name }}</td>
                            <td>{{ result.description }}</td>
                            <td>
                                <a href="{{ result.uri }}">
                                    PDF ({{ result.size | filesizeformat }})
                                    {{ svg_icon('download') }}
                                </a>
                            </td>
                        </tr>

                        {% endfor %}
                        {% endif %}
                    </tbody>
                </table>

                {% if issuer and page.has_next() or page.has_previous() %}

                <nav class="m-pagination"
                     role="navigation"
                     aria-label="Pagination">

                    {% if page.has_previous() %}
                    <a class="a-btn m-pagination_btn-prev"
                       href="?page={{ page.previous_page_number() }}#ccagrsearch">
                        <span class="a-btn_icon a-btn_icon__on-left">{{ svg_icon('left') }}</span>
                        Older
                    </a>
                    {% else %}
                    <a class="a-btn m-pagination_btn-prev" disabled>
                        <span class="a-btn_icon a-btn_icon__on-left">{{ svg_icon('left') }}</span>
                        Older
                    </a>
                    {% endif %}

                    {% if page.has_next() %}
                    <a class="a-btn m-pagination_btn-next"
                        href="?page={{ page.next_page_number() }}#ccagrsearch">
                        <span class="a-btn_icon a-btn_icon__on-right">{{ svg_icon('right') }}</span>
                        Newer
                    </a>
                    {% else %}
                    <a class="a-btn m-pagination_btn-next" disabled>
                        <span class="a-btn_icon a-btn_icon__on-right">{{ svg_icon('right') }}</span>
                        Newer
                    </a>
                    {% endif %}

                    <form class="m-pagination_form"
                          action="#ccagrsearch">
                        <label class="m-pagination_label"
                               for="m-pagination_current-page">
                            Page
                            <span class="u-visually-hidden">
                                number {{ page.number }} out
                            </span>
                            <input class="m-pagination_current-page"
                                    id="m-pagination_current-page"
                                    name="page"
                                    type="number"
                                    min="1"
                                    max="999"
                                    pattern="[0-9]*"
                                    inputmode="numeric"
                                    value="{{ page.number }}">
                            of {{ page.paginator.num_pages }}
                        </label>
                        <button class="a-btn
                                        a-btn__link
                                        m-pagination_btn-submit"
                                id="m-pagination_btn-submit"
                                type="submit">Go</button>
                    </form>
                </nav>

                {% endif %}

                {% include '_database_disclaimer.html' %}

            </div>
        </div>
        <!-- /.content_main -->

        <aside class="content_sidebar o-sidebar-content">
            <div>
                <h5>Search again</h5>
                <h6>Show agreements by card issuer</h6>
                {% if issuer %}{{ issuer_select(issuer.slug) }}{% else %}{{ issuer_select() }}{% endif %}

                {% include '_search_helper.html' %}

                <h5>Need help with your credit cards?</h5>

                <p>
                    We'll forward your issue to your credit card company,
                    give you a tracking number, and keep you updated on the
                    status of your complaint.<br>
                    <a href="https://www.consumerfinance.gov/complaint/">
                        Submit a credit card complaint &#187;
                    </a>
                </p>

                <p>
                    The CARD Act is often called the
                    Credit Cardholders Bill of Rights.
                    President Obama signed the bill into law in May 2009.
                    Many of the most significant provisions of the law took
                    effect in February 2010.<br>
                    <a href="/credit-cards/credit-card-act/">
                        Read more about the Credit CARD Act &#187;
                    </a>
                </p>

                <p>
                    Find guides, your rights related to your credit score,
                    and your credit card protections.<br>
                    <a href="/get-help-now/">
                        Get more information about consumer credit cards &#187;
                    </a>
                </p>
            </div>
        </aside>
    </div>
    <!-- /.content_wrapper -->
</main>
{% endblock %}

{% block page_js %}
{% endblock %}
